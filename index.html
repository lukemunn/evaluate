<!doctype html>
<html>
<head>
	
	<meta charset="utf-8"/>
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<script src="jquery.min.js"></script>	

	<script src="heatmap.min.js"></script>	

	<script src="isotope.pkgd.min.js"></script>
	
	<script src="https://cdn.jsdelivr.net/npm/pdf-lib/dist/pdf-lib.js" type="text/javascript"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.1.1/jspdf.umd.min.js"></script>

	
	<script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/45226/dragula.min.js"></script>
	
	<link rel="stylesheet" href="smart_wizard.css" />
	<link rel="stylesheet" href="style.css" />
	<title>Evaluate Prototype</title>
	
	</head>
	<body>
		

		
		
<section class="intro">
	<h1>Evaluate It!</h1>
	<h4>Online Safety Evalution Framework Generator</h4>
	<p class="step1">Start by selecting the topic, targets, and participants in your project.</p>
	<p class="step2">Great! Now drag and drop indicators to the Micro, Meso, and Macro panels to build your own evaluation framework.</p>
	<p class="step3">When you're finished, generate a PDF of your custom indicators and some best practices. 
		<button type="button" id="generatereport" class="generatereport" onclick="generateReport()">Generate Report</button>
	</p>
</section>

<section class="report-area">
    <div class="report-fixed">Hello World!</div>
</section>

		





<div class="drag-container">
	<ul class="drag-list">
		<li class="drag-column drag-column-on-hold">
			<span class="drag-column-header">
				<h2>Awareness</h2>

			</span>
			<span class="drag-column-header">
				<h4>Initial Conditions: Do people know and recognise the issue?</h4>
			</span>
				
			<ul class="drag-inner-list" id="drag-1">
			</ul>
		</li>
		<li class="drag-column drag-column-in-progress">
			<span class="drag-column-header">
				<h2>Prevention</h2>

			</span>
			<span class="drag-column-header">
				<h4>Progress: Is the issue being prevented or reduced?</h4>
			</span>

			<ul class="drag-inner-list" id="drag-2">

			</ul>
		</li>
		<li class="drag-column drag-column-needs-review">
			<span class="drag-column-header">
				<h2>Maintenance</h2>

			</span>
			<span class="drag-column-header">
				<h4>Ongoing: How is the issue being reported, monitored and managed?</h4>
			</span>

			<ul class="drag-inner-list" id="drag-3">

			</ul>
		</li>
		<li class="drag-column drag-column-approved">
			<span class="drag-column-header">
				<h2>Wellbeing</h2>

			</span>
			<span class="drag-column-header">
				<h4>Final outcomes: how has addressing the issue empowered people, and improved health and wellbeing?</h4>
			</span>
			<ul class="drag-inner-list" id="drag-4">
			</ul>
		</li>
		<li class="drag-column drag-column-no-style">
			<span class="drag-column-header">
				<h2>Indicators</h2>
			</span>
			<div class="scrollme">
			<ul class="drag-inner-list" id="drag-5">
				
			</ul>
		</div>
		</li>
	</ul>
	
	
	
</div>

<div id="infopanel">
	<span class="title">Information Panel</span>
	<span class="desc">Rollover any indicator to get more info about it</span>
	<span class="plus">Strengths</span>
	<span class="minus">Weaknesses</span>
	<span class="recommend">Recommendations</span>
	<span class="cite">Academic Literature or NGO Project</span>
</div>

<div class="hm-wrapper">
	<div class="heatmap"></div>
</div>
</body>

<footer>
	

	<script>


	  // filter using isotope
	  var $container;
	  var filters = {};


		
	    $(document).ready(function(){
			

			  $("#infopanel").show();
			  $(".drag-container").show();
			  $(".filter").show();
			  $(".step1").hide();		
			  $(".step2").show();	


		  $container = $('#drag-5');
	

		  
			
		    // do stuff when checkbox change
		    $('#options').on( 'change', function( jQEvent ) {
		      var $checkbox = $( jQEvent.target );
		      manageCheckbox( $checkbox );

		      var comboFilter = getComboFilter( filters );
			  
			  console.log(comboFilter);

		      $container.isotope({ filter: comboFilter });

		    });
			
			// change checkboxes in filters when wizard options are selected
		    $('.tab-pane').on( 'change', function( jQEvent ) {
		      var $checkbox = $( jQEvent.target );
			  var thisid = $checkbox.attr("id");
			  console.log(thisid);
			  
			  var checkbox = $checkbox[0];
			  var bool = checkbox.checked;
			  
			  var mystr = "#options #"+thisid;
			  console.log(mystr);
			  
			  $(mystr).prop("checked", bool).trigger("change");
			  
		  });

			

		  
		  
	  });



	  function getComboFilter( filters ) {
	    var i = 0;
	    var comboFilters = [];
	    var message = [];

	    for ( var prop in filters ) {
	      message.push( filters[ prop ].join(' ') );
	      var filterGroup = filters[ prop ];
	      // skip to next filter group if it doesn't have any values
	      if ( !filterGroup.length ) {
	        continue;
	      }
	      if ( i === 0 ) {
	        // copy to new array
	        comboFilters = filterGroup.slice(0);
	      } else {
	        var filterSelectors = [];
	        // copy to fresh array
	        var groupCombo = comboFilters.slice(0); // [ A, B ]
	        // merge filter Groups
	        for (var k=0, len3 = filterGroup.length; k < len3; k++) {
	          for (var j=0, len2 = groupCombo.length; j < len2; j++) {
	            filterSelectors.push( groupCombo[j] + filterGroup[k] ); // [ 1, 2 ]
	          }

	        }
	        // apply filter selectors to combo filters for next group
	        comboFilters = filterSelectors;
	      }
	      i++;
	    }

	    var comboFilter = comboFilters.join(', ');
	    return comboFilter;
	  }

	  function manageCheckbox( $checkbox ) {
	    var checkbox = $checkbox[0];

	    var group = $checkbox.parents('.option-set').attr('data-group');
	    // create array for filter group, if not there yet
	    var filterGroup = filters[ group ];
	    if ( !filterGroup ) {
	      filterGroup = filters[ group ] = [];
	    }

	    var isAll = $checkbox.hasClass('all');
	    // reset filter group if the all box was checked
	    if ( isAll ) {
	      delete filters[ group ];
	      if ( !checkbox.checked ) {
	        checkbox.checked = 'checked';
	      }
	    }
		
		
	    // index of
	    var index = $.inArray( checkbox.value, filterGroup );

	    if ( checkbox.checked ) {
	      var selector = isAll ? 'input' : 'input.all';
	      $checkbox.siblings( selector ).removeAttr('checked');
		 $checkbox.siblings( selector ).prop("checked", false);


	      if ( !isAll && index === -1 ) {
	        // add filter to group
	        filters[ group ].push( checkbox.value );
	      }

	    } else if ( !isAll ) {
	      // remove filter from group
	      filters[ group ].splice( index, 1 );
	      // if unchecked the last box, check the all
	      if ( !$checkbox.siblings('[checked]').length ) {
	        $checkbox.siblings('input.all').attr('checked', 'checked');
	      }
	    }

	  }
		
		  
		  
		  
     

	 
	</script>
    <script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>	
	<script src="heatmap-generator.js"></script>	
	<script src="data-loader.js"></script>	
	<script src="script.js"></script>	
</footer>
</html>


